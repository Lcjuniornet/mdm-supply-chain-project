<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard MDM â€” Supply Chain</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=DM+Mono:wght@400;500&display=swap');

  :root {
    --bg:       #0b1220;
    --panel:    #111927;
    --border:   #1e2d40;
    --accent1:  #38bdf8;
    --accent2:  #34d399;
    --accent3:  #fb923c;
    --accent4:  #f87171;
    --accent5:  #a78bfa;
    --text:     #e2e8f0;
    --muted:    #64748b;
    --card-h:   130px;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
  }

  /* â”€â”€ TOP BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .topbar {
    display: flex; align-items: center; justify-content: space-between;
    padding: 14px 28px;
    background: var(--panel);
    border-bottom: 1px solid var(--border);
    position: sticky; top: 0; z-index: 100;
  }
  .topbar-left { display: flex; align-items: center; gap: 14px; }
  .logo-icon {
    width: 38px; height: 38px; border-radius: 10px;
    background: linear-gradient(135deg, var(--accent1), var(--accent5));
    display: flex; align-items: center; justify-content: center;
    font-size: 18px;
  }
  .logo-text h1 { font-size: 15px; font-weight: 700; letter-spacing: .3px; }
  .logo-text p  { font-size: 11px; color: var(--muted); }
  .badge {
    background: rgba(56,189,248,.15); color: var(--accent1);
    border: 1px solid rgba(56,189,248,.3);
    padding: 3px 10px; border-radius: 20px; font-size: 11px; font-weight: 600;
  }
  .topbar-right { display: flex; align-items: center; gap: 10px; }
  .ts { font-size: 11px; color: var(--muted); font-family: 'DM Mono', monospace; }

  /* â”€â”€ NAV TABS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .nav {
    display: flex; gap: 4px;
    padding: 10px 28px;
    background: var(--panel);
    border-bottom: 1px solid var(--border);
  }
  .tab {
    padding: 6px 18px; border-radius: 8px; border: none;
    font-family: 'DM Sans', sans-serif; font-size: 13px; font-weight: 500;
    cursor: pointer; transition: all .2s;
    background: transparent; color: var(--muted);
  }
  .tab:hover { color: var(--text); background: rgba(255,255,255,.05); }
  .tab.active {
    background: rgba(56,189,248,.15); color: var(--accent1);
    border: 1px solid rgba(56,189,248,.25);
  }

  /* â”€â”€ FILTER BAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .filterbar {
    display: flex; align-items: center; gap: 12px;
    padding: 10px 28px;
    background: rgba(17,25,39,.6);
    border-bottom: 1px solid var(--border);
    flex-wrap: wrap;
  }
  .filter-label { font-size: 11px; color: var(--muted); font-weight: 600; letter-spacing: .5px; }
  .filter-btn {
    padding: 5px 14px; border-radius: 20px; border: 1px solid var(--border);
    background: transparent; color: var(--muted);
    font-family: 'DM Sans', sans-serif; font-size: 12px; cursor: pointer;
    transition: all .15s;
  }
  .filter-btn:hover { border-color: var(--accent1); color: var(--accent1); }
  .filter-btn.active {
    background: rgba(56,189,248,.12); color: var(--accent1);
    border-color: rgba(56,189,248,.4);
  }

  /* â”€â”€ PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .page { display: none; padding: 24px 28px; }
  .page.active { display: block; }

  /* â”€â”€ KPI GRID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .kpi-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 14px;
    margin-bottom: 22px;
  }
  .kpi {
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 18px 20px;
    position: relative;
    overflow: hidden;
    transition: transform .15s;
  }
  .kpi:hover { transform: translateY(-2px); }
  .kpi::before {
    content: '';
    position: absolute; top: 0; left: 0; right: 0; height: 3px;
    background: var(--c, var(--accent1));
    border-radius: 14px 14px 0 0;
  }
  .kpi-icon { font-size: 22px; margin-bottom: 10px; }
  .kpi-val {
    font-size: 26px; font-weight: 700; color: var(--c, var(--accent1));
    font-family: 'DM Mono', monospace; letter-spacing: -1px;
    line-height: 1;
  }
  .kpi-label { font-size: 11px; color: var(--muted); margin-top: 6px; font-weight: 500; text-transform: uppercase; letter-spacing: .6px; }
  .kpi-sub   { font-size: 11px; color: var(--muted); margin-top: 4px; }

  /* â”€â”€ CHART GRID â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .chart-grid {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 14px;
    margin-bottom: 14px;
  }
  .chart-grid-3 {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 14px;
  }
  .chart-panel {
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 20px;
  }
  .chart-title {
    font-size: 13px; font-weight: 600; margin-bottom: 16px;
    display: flex; align-items: center; gap: 8px;
  }
  .chart-title span { color: var(--muted); font-weight: 400; font-size: 11px; }
  .chart-wrap { position: relative; }

  /* â”€â”€ RISK PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .risk-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
    margin-bottom: 14px;
  }
  .kpi-risk-row {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 14px;
    margin-bottom: 22px;
  }
  .table-wrap {
    background: var(--panel); border: 1px solid var(--border); border-radius: 14px;
    padding: 20px; grid-column: span 2;
  }
  table { width: 100%; border-collapse: collapse; font-size: 12px; }
  th {
    text-align: left; padding: 8px 12px;
    color: var(--muted); font-size: 10px; font-weight: 600;
    text-transform: uppercase; letter-spacing: .6px;
    border-bottom: 1px solid var(--border);
  }
  td { padding: 9px 12px; border-bottom: 1px solid rgba(255,255,255,.04); }
  tr:last-child td { border-bottom: none; }
  tr:hover td { background: rgba(255,255,255,.03); }
  .badge-cat {
    display: inline-block; padding: 2px 8px; border-radius: 6px;
    font-size: 10px; font-weight: 600;
    background: rgba(56,189,248,.1); color: var(--accent1);
  }
  .valor-cell { font-family: 'DM Mono', monospace; color: var(--accent4); font-size: 11px; }

  /* â”€â”€ GAUGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .gauge-wrap { display: flex; flex-direction: column; align-items: center; }
  .gauge-val  { font-size: 36px; font-weight: 700; font-family: 'DM Mono', monospace; margin-top: 8px; }
  .gauge-label{ font-size: 11px; color: var(--muted); }

  /* â”€â”€ SCROLLBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  ::-webkit-scrollbar { width: 5px; }
  ::-webkit-scrollbar-track { background: var(--bg); }
  ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
</style>
</head>
<body>

<!-- TOP BAR -->
<div class="topbar">
  <div class="topbar-left">
    <div class="logo-icon">ğŸ­</div>
    <div class="logo-text">
      <h1>Dashboard MDM</h1>
      <p>Supply Chain Analytics â€” Projeto MDM</p>
    </div>
    <div class="badge">DIA 13 Â· Power BI Simulado</div>
  </div>
  <div class="topbar-right">
    <span class="ts">Base: 3.300 materiais Â· Atualizado 28/02/2026</span>
  </div>
</div>

<!-- NAV TABS -->
<div class="nav">
  <button class="tab active" onclick="showPage('p1',this)">ğŸ“Š Dashboard MDM</button>
  <button class="tab" onclick="showPage('p2',this)">âš ï¸ AnÃ¡lise de Risco</button>
</div>

<!-- FILTER BAR -->
<div class="filterbar">
  <span class="filter-label">STATUS</span>
  <button class="filter-btn active" onclick="setFilter('status','Todos',this)">Todos</button>
  <button class="filter-btn" onclick="setFilter('status','Ativo',this)">Ativo</button>
  <button class="filter-btn" onclick="setFilter('status','Inativo',this)">Inativo</button>
  <button class="filter-btn" onclick="setFilter('status','Bloqueado',this)">Bloqueado</button>
  <span style="color:var(--border)">â”‚</span>
  <span class="filter-label">FORNECEDOR</span>
  <button class="filter-btn active" onclick="setFilter('fornecedor','Todos',this)">Todos</button>
  <button class="filter-btn" onclick="setFilter('fornecedor','Com',this)">Com Fornecedor</button>
  <button class="filter-btn" onclick="setFilter('fornecedor','Sem',this)">Sem Fornecedor</button>
</div>

<!-- PAGE 1: DASHBOARD MDM -->
<div class="page active" id="p1">

  <!-- KPIs -->
  <div class="kpi-grid">
    <div class="kpi" style="--c:#38bdf8">
      <div class="kpi-icon">ğŸ“¦</div>
      <div class="kpi-val" id="k-total">3.300</div>
      <div class="kpi-label">Total de Materiais</div>
      <div class="kpi-sub">15 categorias</div>
    </div>
    <div class="kpi" style="--c:#34d399">
      <div class="kpi-icon">ğŸ’°</div>
      <div class="kpi-val" id="k-valor">R$ 1,83B</div>
      <div class="kpi-label">Valor em Estoque</div>
      <div class="kpi-sub">R$ 1.833.031.687</div>
    </div>
    <div class="kpi" style="--c:#fb923c">
      <div class="kpi-icon">ğŸ’²</div>
      <div class="kpi-val" id="k-preco">R$ 220</div>
      <div class="kpi-label">PreÃ§o MÃ©dio</div>
      <div class="kpi-sub">por unidade</div>
    </div>
    <div class="kpi" style="--c:#34d399">
      <div class="kpi-icon">âœ…</div>
      <div class="kpi-val" id="k-ativos">2.454</div>
      <div class="kpi-label">Materiais Ativos</div>
      <div class="kpi-sub">74,4% do total</div>
    </div>
    <div class="kpi" style="--c:#f87171">
      <div class="kpi-icon">âš ï¸</div>
      <div class="kpi-val" id="k-semforn">660</div>
      <div class="kpi-label">Sem Fornecedor</div>
      <div class="kpi-sub">20,0% do total</div>
    </div>
  </div>

  <!-- CHARTS ROW 1 -->
  <div class="chart-grid">
    <div class="chart-panel">
      <div class="chart-title">Valor em Estoque por Categoria <span>(R$ milhÃµes)</span></div>
      <div class="chart-wrap"><canvas id="catChart" height="220"></canvas></div>
    </div>
    <div class="chart-panel">
      <div class="chart-title">DistribuiÃ§Ã£o por Status</div>
      <div class="chart-wrap"><canvas id="statusChart" height="220"></canvas></div>
    </div>
  </div>

  <!-- CHARTS ROW 2 -->
  <div class="chart-grid-3">
    <div class="chart-panel">
      <div class="chart-title">Curva ABC <span>(materiais Ã— valor)</span></div>
      <div class="chart-wrap"><canvas id="abcChart" height="200"></canvas></div>
    </div>
    <div class="chart-panel">
      <div class="chart-title">Top Fornecedores <span>(R$ milhÃµes)</span></div>
      <div class="chart-wrap"><canvas id="fornChart" height="200"></canvas></div>
    </div>
    <div class="chart-panel">
      <div class="chart-title">Materiais por Fornecedor</div>
      <div class="chart-wrap"><canvas id="fornStatusChart" height="200"></canvas></div>
    </div>
  </div>
</div>

<!-- PAGE 2: ANÃLISE DE RISCO -->
<div class="page" id="p2">

  <!-- RISK KPIs -->
  <div class="kpi-risk-row">
    <div class="kpi" style="--c:#f87171">
      <div class="kpi-icon">ğŸ”´</div>
      <div class="kpi-val">R$ 394M</div>
      <div class="kpi-label">Valor em Risco</div>
      <div class="kpi-sub">Sem fornecedor cadastrado</div>
    </div>
    <div class="kpi" style="--c:#fb923c">
      <div class="kpi-icon">ğŸ’¤</div>
      <div class="kpi-val">1.054</div>
      <div class="kpi-label">Materiais Parados</div>
      <div class="kpi-sub">&gt;365 dias sem movimento</div>
    </div>
    <div class="kpi" style="--c:#fb923c">
      <div class="kpi-icon">ğŸ¦</div>
      <div class="kpi-val">R$ 531M</div>
      <div class="kpi-label">Capital Imobilizado</div>
      <div class="kpi-sub">Estoque parado &gt;1 ano</div>
    </div>
    <div class="kpi" style="--c:#f87171">
      <div class="kpi-icon">ğŸ“‰</div>
      <div class="kpi-val">128</div>
      <div class="kpi-label">Abaixo do MÃ­nimo</div>
      <div class="kpi-sub">Risco de ruptura</div>
    </div>
  </div>

  <!-- RISK CHARTS -->
  <div class="risk-grid">
    <div class="chart-panel">
      <div class="chart-title">Materiais Abaixo do MÃ­nimo por Categoria</div>
      <div class="chart-wrap"><canvas id="minimoChart" height="260"></canvas></div>
    </div>
    <div class="chart-panel">
      <div class="chart-title">Materiais Parados &gt;365 dias por Categoria</div>
      <div class="chart-wrap"><canvas id="paradosChart" height="260"></canvas></div>
    </div>
  </div>

  <!-- TOP 20 TABLE -->
  <div class="table-wrap">
    <div class="chart-title" style="margin-bottom:14px">
      ğŸ”´ Top 20 Materiais Sem Fornecedor â€” Maior Valor em Risco
    </div>
    <table>
      <thead>
        <tr>
          <th>CÃ³digo</th>
          <th>DescriÃ§Ã£o</th>
          <th>Categoria</th>
          <th>Valor em Estoque</th>
          <th>Risco</th>
        </tr>
      </thead>
      <tbody id="riskTable"></tbody>
    </table>
  </div>
</div>

<script>
// â”€â”€ DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const DATA = {
  categorias: {
    labels: ['Lubrificante','Embalagem','PneumÃ¡tico','ElÃ©trico','Ferramentas','MecÃ¢nico','PeÃ§as','Limpeza','FixaÃ§Ã£o','AcessÃ³rios','EPI','HidrÃ¡ulico','EscritÃ³rio','EletrÃ´nico','QuÃ­mico'],
    valores: [166.1,150.6,144.9,140.5,136.7,136.6,122.9,117.3,111.9,110.7,108.8,99.6,99.6,99.3,87.5]
  },
  status: { labels:['Ativo','Bloqueado','Inativo'], valores:[2454,438,408] },
  abc: {
    labels:['Classe A','Classe B','Classe C'],
    qtd:[359,474,2467], valor:[1466.4,274.9,91.8]
  },
  fornecedores: {
    labels:['Comercial DEF','MetalÃºrgica ABC','Materiais STU','Suprimentos PQR','Nacional MNO','Distribuidora XYZ','Fornecedor VWX','Importadora JKL','Industrial GHI'],
    valores:[181.4,178.4,170.5,169.7,162.5,159.3,156.0,142.3,118.8]
  },
  abaixoMinimo: {
    labels:['QuÃ­mico','Ferramentas','Embalagem','MecÃ¢nico','EscritÃ³rio','ElÃ©trico','HidrÃ¡ulico','PeÃ§as','Lubrificante','AcessÃ³rios'],
    valores:[17,16,15,11,9,7,7,7,7,6]
  },
  parados: {
    labels:['Lubrificante','Embalagem','PneumÃ¡tico','ElÃ©trico','Ferramentas','MecÃ¢nico','PeÃ§as','Limpeza','FixaÃ§Ã£o','AcessÃ³rios'],
    valores:[92,84,78,75,71,68,65,62,59,55]
  },
  top20: [
    {cod:'MAT-00813',desc:'Alicate PVC',cat:'Ferramentas',val:9170894},
    {cod:'MAT-02908',desc:'AbraÃ§adeira PVC',cat:'AcessÃ³rios',val:8981653},
    {cod:'MAT-02937',desc:'Desinfetante PlÃ¡stico',cat:'Limpeza',val:8592237},
    {cod:'MAT-02625',desc:'Rolamento AlumÃ­nio',cat:'PeÃ§as',val:8513805},
    {cod:'MAT-00676',desc:'Rolamento AlumÃ­nio',cat:'MecÃ¢nico',val:8283929},
    {cod:'MAT-01147',desc:'Vassoura LatÃ£o',cat:'Limpeza',val:7991239},
    {cod:'MAT-00032',desc:'Rolamento AlumÃ­nio',cat:'MecÃ¢nico',val:7709998},
    {cod:'MAT-01668',desc:'Ã“leo Inox',cat:'Lubrificante',val:7480850},
    {cod:'MAT-02851',desc:'Bucha LatÃ£o',cat:'MecÃ¢nico',val:7286433},
    {cod:'MAT-00900',desc:'Correia Cobre',cat:'MecÃ¢nico',val:6587145},
    {cod:'MAT-01276',desc:'LED PVC',cat:'EletrÃ´nico',val:6476359},
    {cod:'MAT-00414',desc:'Caixa PVC',cat:'Embalagem',val:6391004},
    {cod:'MAT-00685',desc:'Mangueira Inox',cat:'HidrÃ¡ulico',val:6328665},
    {cod:'MAT-00514',desc:'Rolamento AlumÃ­nio',cat:'MecÃ¢nico',val:6300155},
    {cod:'MAT-06001',desc:'AbraÃ§adeira PVC',cat:'AcessÃ³rios',val:6285517},
    {cod:'MAT-01367',desc:'Etiqueta PlÃ¡stico',cat:'Embalagem',val:5953404},
    {cod:'MAT-00138',desc:'Pasta AÃ§o',cat:'EscritÃ³rio',val:5930946},
    {cod:'MAT-00794',desc:'Fita AÃ§o',cat:'Embalagem',val:5914966},
    {cod:'MAT-00122',desc:'Prego Cobre',cat:'FixaÃ§Ã£o',val:5801915},
    {cod:'MAT-00138b',desc:'Pasta AÃ§o (dup)',cat:'EscritÃ³rio',val:5677713},
  ]
};

// â”€â”€ THEME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Chart.defaults.color = '#64748b';
Chart.defaults.font.family = "'DM Sans', sans-serif";
const COLORS = ['#38bdf8','#34d399','#fb923c','#f87171','#a78bfa','#fbbf24','#2dd4bf','#e879f9','#4ade80','#f472b6'];
const green = '#34d399', orange = '#fb923c', red = '#f87171', blue = '#38bdf8';

function mkChart(id, type, labels, datasets, opts={}) {
  const ctx = document.getElementById(id).getContext('2d');
  return new Chart(ctx, {
    type, data:{ labels, datasets },
    options: {
      responsive:true, maintainAspectRatio:false,
      plugins: {
        legend: { labels:{ color:'#94a3b8', boxWidth:12, padding:12 } },
        tooltip: { backgroundColor:'#1e2d40', titleColor:'#e2e8f0', bodyColor:'#94a3b8', borderColor:'#2d3f55', borderWidth:1 }
      },
      scales: type==='pie'||type==='doughnut' ? {} : {
        x: { grid:{ color:'rgba(255,255,255,.05)' }, ticks:{ color:'#64748b' } },
        y: { grid:{ color:'rgba(255,255,255,.05)' }, ticks:{ color:'#64748b' } }
      },
      ...opts
    }
  });
}

// â”€â”€ BUILD CHARTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
window.addEventListener('DOMContentLoaded', () => {

  // 1. Categorias (barras horizontais)
  mkChart('catChart', 'bar',
    DATA.categorias.labels,
    [{
      label:'Valor (R$ mi)', data: DATA.categorias.valores,
      backgroundColor: DATA.categorias.labels.map((_,i) => COLORS[i % COLORS.length] + 'cc'),
      borderColor:     DATA.categorias.labels.map((_,i) => COLORS[i % COLORS.length]),
      borderWidth:1, borderRadius:4,
    }],
    { indexAxis:'y', plugins:{ legend:{ display:false } } }
  );

  // 2. Status (pizza)
  mkChart('statusChart', 'doughnut',
    DATA.status.labels,
    [{
      data: DATA.status.valores,
      backgroundColor: [green+'bb', orange+'bb', red+'bb'],
      borderColor: [green, orange, red], borderWidth:2,
    }],
    { cutout:'62%', plugins:{ legend:{ position:'bottom' } } }
  );

  // 3. ABC (barras agrupadas)
  mkChart('abcChart', 'bar',
    DATA.abc.labels,
    [
      { label:'Qtd Itens', data:DATA.abc.qtd, backgroundColor:blue+'99', borderColor:blue, borderWidth:1, borderRadius:4, yAxisID:'y' },
      { label:'Valor R$mi', data:DATA.abc.valor, backgroundColor:green+'99', borderColor:green, borderWidth:1, borderRadius:4, yAxisID:'y1' },
    ],
    {
      scales:{
        y:  { position:'left',  grid:{ color:'rgba(255,255,255,.05)' }, ticks:{ color:'#64748b' } },
        y1: { position:'right', grid:{ display:false }, ticks:{ color:green } }
      }
    }
  );

  // 4. Fornecedores (barras)
  mkChart('fornChart', 'bar',
    DATA.fornecedores.labels,
    [{
      label:'Valor (R$ mi)', data:DATA.fornecedores.valores,
      backgroundColor: orange+'99', borderColor:orange, borderWidth:1, borderRadius:4
    }],
    { indexAxis:'y', plugins:{ legend:{ display:false } } }
  );

  // 5. Com / Sem Fornecedor (pizza)
  mkChart('fornStatusChart', 'doughnut',
    ['Com Fornecedor','Sem Fornecedor'],
    [{
      data:[2640, 660],
      backgroundColor:[green+'bb', red+'bb'],
      borderColor:[green, red], borderWidth:2,
    }],
    { cutout:'60%', plugins:{ legend:{ position:'bottom' } } }
  );

  // 6. Abaixo mÃ­nimo (barras)
  mkChart('minimoChart', 'bar',
    DATA.abaixoMinimo.labels,
    [{
      label:'Materiais', data:DATA.abaixoMinimo.valores,
      backgroundColor:orange+'aa', borderColor:orange, borderWidth:1, borderRadius:4
    }],
    { plugins:{ legend:{ display:false } }, indexAxis:'y' }
  );

  // 7. Parados (barras)
  mkChart('paradosChart', 'bar',
    DATA.parados.labels,
    [{
      label:'Materiais parados', data:DATA.parados.valores,
      backgroundColor:red+'aa', borderColor:red, borderWidth:1, borderRadius:4
    }],
    { plugins:{ legend:{ display:false } }, indexAxis:'y' }
  );

  // 8. Tabela Top 20
  const tbody = document.getElementById('riskTable');
  const risks = ['CRÃTICO','CRÃTICO','CRÃTICO','ALTO','ALTO','ALTO','ALTO','MÃ‰DIO','MÃ‰DIO','MÃ‰DIO'];
  const riskColors = { 'CRÃTICO':red, 'ALTO':orange, 'MÃ‰DIO':'#fbbf24' };
  DATA.top20.forEach((row, i) => {
    const risk = risks[i] || 'MÃ‰DIO';
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td style="font-family:'DM Mono',monospace;font-size:11px;color:var(--muted)">${row.cod}</td>
      <td>${row.desc}</td>
      <td><span class="badge-cat">${row.cat}</span></td>
      <td class="valor-cell">R$ ${row.val.toLocaleString('pt-BR')}</td>
      <td><span style="color:${riskColors[risk]};font-size:11px;font-weight:700">${risk}</span></td>
    `;
    tbody.appendChild(tr);
  });
});

// â”€â”€ PAGE SWITCHING â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showPage(id, btn) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  btn.classList.add('active');
}

// â”€â”€ FILTER (visual only, updates KPIs) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const filters = { status:'Todos', fornecedor:'Todos' };
function setFilter(type, val, btn) {
  document.querySelectorAll('.filter-btn').forEach(b => {
    if (b.onclick.toString().includes(`'${type}'`)) b.classList.remove('active');
  });
  btn.classList.add('active');
  filters[type] = val;
  updateKPIs();
}

function updateKPIs() {
  const statusMult = { 'Todos':1, 'Ativo':0.744, 'Inativo':0.124, 'Bloqueado':0.133 };
  const fornMult   = { 'Todos':1, 'Com':0.8, 'Sem':0.2 };
  const m = statusMult[filters.status] * fornMult[filters.fornecedor];
  const total = Math.round(3300 * m);
  const valor = (1833 * m).toFixed(0);
  const ativos = filters.status==='Ativo' ? Math.round(2454*fornMult[filters.fornecedor]) : filters.status==='Todos' ? Math.round(2454*fornMult[filters.fornecedor]) : 0;
  const semForn = filters.fornecedor==='Com' ? 0 : filters.fornecedor==='Sem' ? Math.round(660*statusMult[filters.status]) : Math.round(660*statusMult[filters.status]);

  document.getElementById('k-total').textContent = total.toLocaleString('pt-BR');
  document.getElementById('k-valor').textContent = `R$ ${valor}M`;
  document.getElementById('k-ativos').textContent = ativos.toLocaleString('pt-BR');
  document.getElementById('k-semforn').textContent = semForn.toLocaleString('pt-BR');
}
</script>
</body>
</html>
